Script started on Sat Mar 23 19:37:47 2024
[?1034h[34m19:37:47[0m:[33marm64[0m:[32m~/c[0m$ cd -
/Users/gera/mipt.tech
[34m19:37:48[0m:[33marm64[0m:[32m~/mipt.tech[0m$ yes | git diff
[?1h=[1mdiff --git a/.githooks/pre-commit.sh b/.githooks/pre-commit.sh[m[m
[1mindex 3fbfaed4..36ee2ed2 100755[m[m
[1m--- a/.githooks/pre-commit.sh[m[m
[1m+++ b/.githooks/pre-commit.sh[m[m
[36m@@ -1,8 +1,8 @@[m[m
[31m-#!/bin/sh[m[m
[32m+[m[32m#!/bin/bash[m[m
 #[m[m
 # A hook checking codestyle & running linters on staged files[m[m
 [m[m
[31m-echo "\e[36mPerforming pre-commit checks...\e[39m"[m[m
[32m+[m[32mecho $'\e[36mPerforming pre-commit checks...\e[39m'[m[m
 [m[m
 # NextJS-frontend folder files check[m[m
 nextjs_frontend_staged_files=$(git diff --diff-filter=d --name-only --cached | grep -E '^nextjs-frontend/.*.(js|jsx|ts|tsx)$')[m[m
[36m@@ -13,15 +13,14 @@[m [mnextjs_frontend_exit_code="0"[m[m
 [m[m
 if [ "$nextjs_frontend_staged_files_num" -gt "0" ][m[m
 then[m[m
[31m-    echo "\e[36mFound $nextjs_frontend_staged_files_num nextjs files to be checked & linted:\e[39m"[m[m
[31m-    echo  "$nextjs_frontend_staged_files"[m[m
[31m-    echo "\e[36mdocker-compose exec -T nextjs-frontend prettier --write $nextjs_frontend_staged_files_oneline_container_path\e[39m"[m[m
[31m-    docker-compose exec -T nextjs-frontend prettier --write $nextjs_frontend_staged_files_oneline_container_path[m[m
[31m-    echo "\e[36mgit add $nextjs_frontend_staged_files_oneline\e[39m"[m[m
[31m-    git add $nextjs_frontend_staged_files_oneline[m[m
[31m-    echo "\e[36mdocker-compose exec -T nextjs-frontend npm run lint\e[39m"[m[m
[31m-    echo "\e[36mdocker-compose exec -T nextjs-frontend npm run check-types\e[39m"[m[m
[31m-    docker-compose exec -T nextjs-frontend eslint --max-warnings 0 $nextjs_frontend_staged_files_oneline_container_path[m[m
[32m+[m[32m    echo $'\e[36mFound '"$nextjs_frontend_staged_files_num"$' nextjs files to be checked & linted:\e[39m'[m[m
[32m+[m[32m    echo    "$nextjs_frontend_staged_files"[m[m
[32m+[m[32m    echo $'\e[36mdocker-compose exec -T nextjs-frontend prettier --write '"$nextjs_frontend_staged_files_oneline_container_path"$'\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                 docker-compose exec -T nextjs-frontend prettier --write   $nextjs_frontend_staged_files_oneline_container_path[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    echo $'\e[36mgit add '"$nextjs_frontend_staged_files_oneline"$'\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                 git add   $nextjs_frontend_staged_files_oneline[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    echo $'\e[36mdocker-compose exec -T nextjs-frontend eslint --max-warnings 0 '"$nextjs_frontend_staged_files_oneline_container_path"$'\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                 docker-compose exec -T nextjs-frontend eslint --max-warnings 0   $nextjs_frontend_staged_files_oneline_container_path[m[m
:[K[K [KESCESC[KOO[KBB[K     nextjs_frontend_exit_code=$?[m[m
:[K[K [KESCESC[KOO[KBB[K fi[m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K[36m@@ -35,40 +34,40 @@[m [mfrontend_exit_code="0"[m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K if [ "$frontend_files_changed_num" -gt "0" ][m[m
:[K[K [KESCESC[KOO[KBB[K then[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    echo "\e[36mFound $frontend_files_changed_num frontend files to be checked & linted:\e[39m"[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    echo  "$(git diff --diff-filter=d --name-only --cached | grep -E '^frontend/.*.(js|jsx|css|scss|less)$')"[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    echo "\e[36mdocker-compose exec -T frontend prettier --write $frontend_files_changed_container_path\e[39m"[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    docker-compose exec -T frontend prettier --write $frontend_files_changed_container_path[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    echo "\e[36mgit add $frontend_files_changed\e[39m"[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    git add $frontend_files_changed[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    echo "\e[36mdocker-compose exec -T frontend eslint --max-warnings=0 $frontend_files_changed_container_path_js_only\e[39m"[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    docker-compose exec -T frontend eslint --max-warnings=0 $frontend_files_changed_container_path_js_only[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    echo $'\e[36mFound '"$frontend_files_changed_num"$' frontend files to be checked & linted:\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    git diff --diff-filter=d --name-only --cached | grep -E '^frontend/.*.(js|jsx|css|scss|less)$'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    echo $'\e[36mdocker-compose exec -T frontend prettier --write '"$frontend_files_changed_container_path"$'\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                 docker-compose exec -T frontend prettier --write   $frontend_files_changed_container_path[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    echo $'\e[36mgit add '"$frontend_files_changed"$'\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                 git add   $frontend_files_changed[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    echo $'\e[36mdocker-compose exec -T frontend eslint --max-warnings=0 '"$frontend_files_changed_container_path_js_only"$'\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                 docker-compose exec -T frontend eslint --max-warnings=0   $frontend_files_changed_container_path_js_only[m[m
:[K[K [KESCESC[KOO[KBB[K     frontend_exit_code=$?[m[m
:[K[K [KESCESC[KOO[KBB[K fi[m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K # backend folder files check[m[m
:[K[K [KESCESC[KOO[KBB[K backend_files_changed_num=$(git diff --diff-filter=d --name-only --cached | grep -E -c '^backend/.*.py$')[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-backend_files_changed=$(git diff --diff-filter=d --name-only --cached | grep -E '^backend/.*.py$' | tr '\n' ' ' | tr -d '\r')[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m# backend_files_changed=$(git diff --diff-filter=d --name-only --cached | grep -E '^backend/.*.py$' | tr '\n' ' ' | tr -d '\r')[m[m
:[K[K [KESCESC[KOO[KBB[K backend_files_changed_container_path=$(git diff --diff-filter=d --name-only --cached | grep -E '^backend/.*.py$' | tr '\n' ' ' | tr -d '\r' | sed 's/backend\///g')[m[m
:[K[K [KESCESC[KOO[KBB[K backend_exit_code="0"[m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K if [ "$backend_files_changed_num" -gt "0" ][m[m
:[K[K [KESCESC[KOO[KBB[K then[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    echo "\e[36mFound $backend_files_changed_num backend files to be checked:\e[39m"[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    echo  "$(git diff --diff-filter=d --name-only --cached | grep '^backend/.*.py$')"[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    echo "\e[36mdocker-compose exec -T django flake8 --max-line-length=120 --exclude=*/migrations/* $backend_files_changed_container_path\e[39m"[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    docker-compose exec -T django flake8 --max-line-length=120 --exclude=*/migrations/* $backend_files_changed_container_path[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    echo $'\e[36mFound '"$backend_files_changed_num"$' backend files to be checked:\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    git diff --diff-filter=d --name-only --cached | grep '^backend/.*.py$'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    echo $'\e[36mdocker-compose exec -T django flake8 --max-line-length=120 --exclude=\'*/migrations/*\' '"$backend_files_changed_container_path"$'\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                 docker-compose exec -T django flake8 --max-line-length=120  --exclude='*/migrations/*'    $backend_files_changed_container_path[m[m
:[K[K [KESCESC[KOO[KBB[K     backend_exit_code=$?[m[m
:[K[K [KESCESC[KOO[KBB[K fi[m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K if [ "$backend_exit_code" -eq "0" ] && [ "$frontend_exit_code" -eq "0" ] && [ "$nextjs_frontend_exit_code" -eq "0" ];[m[m
:[K[K [KESCESC[KOO[KBB[K then[m[m
:[K[K [KESCESC[KOO[KBB[K     # Zero exit code - successfully returning[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    echo "\e[32mAll pre-commit checks were successfully passed!\e[39m"[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    exit 0[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    echo $'\e[32mAll pre-commit checks were successfully passed!\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    exit 1[m[m
:[K[K [KESCESC[KOO[KBB[K else[m[m
:[K[K [KESCESC[KOO[KBB[K     # Exiting with not-zero code - meaning that errors were occured & need to stop commit[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    echo "\e[31mFound some errors. Please fix them before committing!\e[39m"[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    echo $'\e[31mFound some errors. Please fix them before committing!\e[39m'[m[m
:[K[K [KESCESC[KOO[KBB[K     exit 1[m[m
:[K[K [KESCESC[KOO[KBB[K fi[m[m
:[K[K [KESCESC[KOO[KBB[K[1mdiff --git a/backend/django_apps_activism/task_tracker/models.py b/backend/django_apps_activism/task_tracker/models.py[m[m
:[K[K [KESCESC[KOO[KBB[K[1mindex 203efc84..5768d2a2 100644[m[m
:[K[K [KESCESC[KOO[KBB[K[1m--- a/backend/django_apps_activism/task_tracker/models.py[m[m
:[K[K [KESCESC[KOO[KBB[K[1m+++ b/backend/django_apps_activism/task_tracker/models.py[m[m
:[K[K [KESCESC[KOO[KBB[K[36m@@ -1,4 +1,3 @@[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-_________-[m[m
:[K[K [KESCESC[KOO[KBB[K import math[m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K from django.db import models[m[m
:[K[K [KESCESC[KOO[KBB[K[36m@@ -12,6 +11,7 @@[m [mfrom django.dispatch import receiver[m[m
:[K[K [KESCESC[KOO[KBB[K from accounts.models import User[m[m
:[K[K [KESCESC[KOO[KBB[K from comments.models import Comment[m[m
:[K[K [KESCESC[KOO[KBB[K from student_council.models import Activist, Department, ActivismRank[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m__name__[m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K class EventStatus(models.TextChoices):[m[m
:[K[K [KESCESC[KOO[KBB[K[1mdiff --git a/docker-compose.yml b/docker-compose.yml[m[m
:[K[K [KESCESC[KOO[KBB[K[1mindex 8b7c7fcb..a0e01e6e 100644[m[m
:[K[K [KESCESC[KOO[KBB[K[1m--- a/docker-compose.yml[m[m
:[K[K [KESCESC[KOO[KBB[K[1m+++ b/docker-compose.yml[m[m
:[K[K [KESCESC[KOO[KBB[K[36m@@ -215,25 +215,25 @@[m [mservices:[m[m
:[K[K [KESCESC[KOO[KBB[K         env_file:[m[m
:[K[K [KESCESC[KOO[KBB[K             - ${ENV_FILE:-.env}[m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    # frontend:[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #     build:[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #         context: ./frontend[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #         dockerfile: Dockerfile.dev[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #         args:[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #             - REGISTRY=${CI_DEPENDENCY_PROXY_GROUP_IMAGE_PREFIX:-docker.io}[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #             - GOOGLE_RECAPTCHA_SITE_KEY=${GOOGLE_RECAPTCHA_SITE_KEY}[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #             - TELEGRAM_BOT_ID=${TELEGRAM_BOT_ID}[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #             - REACT_APP_MULTIDOMAIN_TYPE=${REACT_APP_MULTIDOMAIN_TYPE}[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #     restart: on-failure[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #     hostname: react-web[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #     expose:[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #         - 3000[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #     volumes:[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #         - ./frontend:/opt/frontend[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #         - ./frontend/.npm-cache:/.npm[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #     env_file:[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #         - ${ENV_FILE:-.env}[m[m
:[K[K [KESCESC[KOO[KBB[K[31m-    #     stdin_open: true[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    frontend:[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m        build:[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m            context: ./frontend[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m            dockerfile: Dockerfile.dev[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m            args:[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                - REGISTRY=${CI_DEPENDENCY_PROXY_GROUP_IMAGE_PREFIX:-docker.io}[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                - GOOGLE_RECAPTCHA_SITE_KEY=${GOOGLE_RECAPTCHA_SITE_KEY}[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                - TELEGRAM_BOT_ID=${TELEGRAM_BOT_ID}[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                - REACT_APP_MULTIDOMAIN_TYPE=${REACT_APP_MULTIDOMAIN_TYPE}[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m        restart: on-failure[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m        hostname: react-web[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m        expose:[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m            - 3000[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m        volumes:[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m            - ./frontend:/opt/frontend[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m            - ./frontend/.npm-cache:/.npm[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m        env_file:[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m            - ${ENV_FILE:-.env}[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m        stdin_open: true[m[m
:[K[K [KESCESC[KOO[KBB[K [m[m
:[K[K [KESCESC[KOO[KBB[K     nextjs-frontend:[m[m
:[K[K [KESCESC[KOO[KBB[K         build:[m[m
:[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K [KESCESC[KOO[KBB[K[K[7m(END)[27m[K[K[?1l>[34m19:38:00[0m:[33marm64[0m:[32m~/mipt.tech[0m$ exit

Script done on Sat Mar 23 19:38:05 2024
