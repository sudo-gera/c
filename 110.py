from h import *

k=[q%14 in [0,4,7,8,10,11,12,13] for q in range(14)]

def r110(l,f):
    for q in range(len(l)):
        for w in range(len(l[q])):
            l[q][w]=not l[q][w]
    for q in range(len(l)-1)[::-1]:
        for w in range(len(l[q])-1)[::-1]:
            l[q][w]=l[q][w]+max([l[q+1][w],l[q][w+1]]) if l[q][w] else 0
    for q in range(len(l)):
        for w in range(len(l[q])):
            t=[]
            if q:
                t.append(l[q-1][w])
            if w:
                t.append(l[q][w-1])
            t.append(l[q][w])
            l[q][w]=max(t) if l[q][w] else 0
    


    # for q in range(len(l)):
    #     for w in range(len(l[q])):
    #         l[q][w]^=(w+q*4)%14 in [0,4,7,8,10,11,12,13]
    # l=[[[0,0,0] if q else [255,255,255] for q in w] for w in l]
    cs=[
        [128,128,128],
        [0,0,255],
        [0,255,0],
        [0,255,255],
        [255,0,0],
        [255,0,255],
        [255,255,0],
        [255,255,255],
    ]
    l=[[cs[q%len(cs)][:] if q else [0,0,0] for q in w] for w in l]
    # for q in range(len(l)):
    #     for w in range(len(l[q])):
    #         for e in range(3):
    #             l[q][w][e]//=2
    #             l[q][w][e]+=w%14//7*128
    bmp_write(l[::-1],f)

###############################################################################


s=101

###############################################################################


l=[[0 for q in range(s)] for w in range(s*8)]


l[0]=[q%14 in [0,4,7,8,10,11,12,13] for q in range(len(l[0]))]
l[0][0]=0
l[0][1]=1
l[0][4]=0

###############################################################################



def insert(a,s):
    l[0][s:s]=a
    l[0][len(l[0])-len(a):]=[]

def insert_g(s,t):
    a=[1,1,1,1,1,0,0,0,1,0,0,1,1,0]
    x=(2*''.join([str(w) for w in a])).index(''.join([str(int(w)) for w in l[0][s-2:s+3]]))
    # print(x)
    t=[[w,s] for w in t]
    insert(*t[x])

def insert_a4(s):
    insert_g(s,[
        [1,1,1,0,1,1,1,0,1,1,],
        [1,1,0,1,1,1,0,1,1,1,],
        [1,0,1,1,1,0,1,1,1,1,],
        [0,1,1,1,0,1,1,1,1,1,],
        [0,0,1,1,1,0,1,1,1,0,],
        [0,1,1,1,0,1,1,1,0,0,],
        [1,1,1,0,1,1,1,0,0,0,],
        [1,1,0,1,1,1,0,0,0,1,],
        [0,1,1,0,1,1,1,0,1,0,],
        [1,1,0,1,1,1,0,1,0,0,],
        [1,0,1,1,1,0,1,0,0,1,],
        [0,1,1,1,0,1,0,0,1,1,],
        [1,1,1,1,1,0,1,1,1,0,],
        [1,1,1,1,0,1,1,1,0,1,],
    ])

def insert_c2(s):
    insert_g(s,[
        [1,1,1,0,0,0,0,1,1,],
        [1,1,0,0,0,0,1,1,1,],
        [1,0,1,1,1,1,1,1,1,],
        [0,1,1,1,1,1,1,1,1,],
        [0,0,1,0,0,0,1,1,0,],
        [0,1,0,0,0,1,1,0,0,],
        [1,1,1,0,0,0,0,0,0,],
        [1,1,0,0,0,0,0,0,1,],
        [0,1,1,0,0,1,1,1,0,],
        [1,1,0,0,1,1,1,0,0,],
        [1,0,1,0,0,0,0,0,1,],
        [0,1,0,0,0,0,0,1,1,],
        [1,1,1,0,1,1,0,1,0,],
        [1,1,0,1,1,0,1,0,1,],
    ])



a=[0,0,1,1,1,0,0,0,0,0,1,0,0,1,1,0,1,1,1,1,1,]
s=15+14*4
insert(a,s)










for q,w in zip(l[1:],l):
    for e in range(1,len(q)-1):
        q[e]=0 if w[e-1]&w[e]&w[e+1] else w[e]|w[e+1]




r110(l,'test.bmp')



